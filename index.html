<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kari Appukutty</title>
    <link rel="stylesheet" href="style.css"></head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<body>
  <div class="container">
    <h4>For You Appukutty</h4>
    <img id="track_img">
    <marquee id="title">Love u Appu</marquee>
    <input type="range" id="dura" min="0" max="100" value="0" onclick="change()">
    <button onclick="previous()" id="pre"><i class="fa fa-step-backward"></i></button>
    <button onclick="justplay()" id="play"><i class="fa fa-play"></i></button>
    <button onclick="next()" id="ne"><i class="fa fa-step-forward"></i></button>

  </div>
  <script>
    var prev=document.querySelector('#pre');
    var play=document.querySelector('#play');
    var nex=document.querySelector('#ne');
    var tit=document.querySelector('#title');
    var slider=document.querySelector('#dura');
    var track_img=document.querySelector('#track_img');
    let timer;
    let autoplay=1;
    let index_no=0;
    let playing_song=false;
    let track=document.createElement('audio');
    let all_song=[
        {
            name:"Love u Appukutty",
            path:"music/song1.mp3",
            img:"img/kari.jpg"

    },
    {
            name:"Miss u Appu",
            path:"music/song2.mp3",
            img:"img/kari1.jpg"

    },
    {
            name:"Mine Forever",
            path:"music/song3.mp3",
            img:"img/kari2.jpg"

    }];
    function load(index_no){
        clearInterval(timer);
        reset_slider();
        track.src=all_song[index_no].path;
        tit.innerHTML=all_song[index_no].name;
        track_img.src=all_song[index_no].img;
        timer=setInterval(range_slider,1000);
        total.innerHTML=all_song.length;
        present.innerHTML=index_no+1;



    }
    load(index_no);

    function justplay(){
        if(playing_song == false){
            playsong();
        }
        else{
            pausesong();
        }
    }
    function reset_slider(){
        slider.value=0;
    }
    function playsong(){
        track.play();
        playing_song=true;
        play.innerHTML='<i class="fa fa-pause"></i>'

    }
    function pausesong(){
        track.pause();
        playing_song=false;
        play.innerHTML='<i class="fa fa-play"></i>'
    }
    function next(){
        if(index_no<all_song.length-1){
            index_no+=1;
            load(index_no);
            playsong();
        }
        else{
            index_no=0;
            load(index_no);
            playsong();
        }
    }
    function previous(){
        if(index_no>0){
            index_no-=1;
            load(index_no);
            playsong();
        }
        else{
            index_no=0;
            load(index_no);
            playsong();
        }
    }
    function change(){
        slider_position=track.duration *(slider.value/100)
        track.currentTime=slider_position;
    }


  </script>
</body>
</html>